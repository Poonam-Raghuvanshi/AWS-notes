<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title> Aurora </title>
    <link rel="stylesheet" href="../style.css">
</head>

<body>
    <p class="main-heading">Amazon Aurora</p>
    <p>
        An Amazon Aurora DB cluster consists of one or more DB instances and a cluster volume that manages the data for
        those DB instances. An Aurora cluster volume is a virtual database storage volume that spans multiple
        Availability Zones, with each Availability Zone having a copy of the DB cluster data. Two types of DB instances
        make up an Aurora DB cluster:
    </p>
    <p> <b>Each Aurora DB cluster has one primary DB instance and can have up to 15 Aurora Replicas.</b></p>
    <p>
        <span class="point"> Primary DB instance</span>
        – Supports read and write operations, and performs all of the data modifications to the
        cluster volume.
    </p>
    <p>
        <span class="point"> Aurora Replica </span>
        – Connects to the same storage volume as the primary DB instance and supports only read
        operations.
        Aurora automatically fails over to an Aurora Replica in case the primary DB instance becomes unavailable. You
        can specify the failover priority for Aurora Replicas. Aurora Replicas can also offload read workloads from the
        primary DB instance.
    </p>
    <p>Aurora Replicas have two main purposes. You can issue queries to them to scale the read operations for your
        application. You typically do so by connecting to the reader endpoint of the cluster. That way, Aurora can
        spread the load for read-only connections across as many Aurora Replicas as you have in the cluster. Aurora
        Replicas also help to increase availability. If the writer instance in a cluster becomes unavailable, Aurora
        automatically promotes one of the reader instances to take its place as the new writer.

        While setting up a Multi-AZ deployment for Aurora, you create an Aurora replica or reader node in a different
        AZ.</p>
    <p>You use the reader endpoint for read-only connections for your Aurora cluster. This endpoint uses a
        load-balancing mechanism to help your cluster handle a query-intensive workload. The reader endpoint is the
        endpoint that you supply to applications that do reporting or other read-only operations on the cluster. The
        reader endpoint load-balances connections to available Aurora Replicas in an Aurora DB cluster.</p>
    <img src="../images/aurora.jpg" />

    <p class="heading">Types of Aurora endpoints</p>
    <p>
        An endpoint is represented as an Aurora-specific URL that contains a host address and a port. <br>

        <span class="point"> Cluster endpoint (or writer endpoint)</span>
        - connects to the current primary DB instance for
        that DB cluster. <b>Only one that can perform write operations such as DDL statements and for read operations,
            such as queries. </b>
        Each Aurora DB cluster has one cluster endpoint and one primary DB instance.

        The cluster endpoint provides failover support for read/write connections to the DB cluster. If the current
        primary DB instance of a DB cluster fails, Aurora automatically fails over to a new primary DB instance. During
        a failover, the DB cluster continues to serve connection requests to the cluster endpoint from the new primary
        DB instance, with minimal interruption of service.

        <br>

        <span class="point"> Reader endpoint</span> -

        <b>provides load-balancing support for read-only connections to the DB
            cluster</b>. Use the reader endpoint for read operations, such as queries. By processing those statements on
        <b> the read-only Aurora Replicas, this endpoint reduces the overhead on the primary instance. Each Aurora DB
            cluster
            has one reader endpoint and helps scale the capacity to handle simultaneous SELECT queries.</b>

        If the cluster contains one or more Aurora Replicas, the reader endpoint load-balances each connection request
        among the Aurora Replicas. In that case, you can only perform read-only statements such as SELECT in that
        session. If the cluster only contains a primary instance and no Aurora Replicas, the reader endpoint connects to
        the primary instance. In that case, you can perform write operations through the endpoint.

        <br>

        <span class="point"> Custom endpoint</span> - represents a set of DB instances that you choose. When you connect
        to the endpoint, Aurora performs load balancing and chooses one of the instances in the group to handle the
        connection. You define which instances this endpoint refers to, and you decide what purpose the endpoint serves.

        <b> An Aurora DB cluster has no custom endpoints until you create one (max five custom endpoints
            for each provisioned Aurora cluster). You can't use custom endpoints for Aurora Serverless clusters.</b>

        The custom endpoint provides load-balanced database connections based on criteria other than the read-only or
        read/write capability of the DB instances. For example, you might define a custom endpoint to connect to
        instances that use a particular AWS instance class or a particular DB parameter group. Then you might tell
        particular groups of users about this custom endpoint. For example, you might direct internal users to
        low-capacity instances for report generation or ad hoc (one-time) querying, and direct production traffic to
        high-capacity instances.

        Because the connection can go to any DB instance that is associated with the custom endpoint, we recommend that
        you make sure that all the DB instances within that group share some similar characteristic. Doing so ensures
        that the performance, memory capacity, and so on, are consistent for everyone who connects to that endpoint.

        This feature is intended for advanced users with specialized kinds of workloads where it isn't practical to keep
        all the Aurora Replicas in the cluster identical. With custom endpoints, you can predict the capacity of the DB
        instance used for each connection. When you use custom endpoints, you typically don't use the reader endpoint
        for that cluster.

        <br>

        <span class="point"> Instance endpoint</span> - connects to a specific DB instance within an Aurora cluster.
        Each DB instance in a DB
        cluster has its own unique instance endpoint. So there is one instance endpoint for the current primary DB
        instance of the DB cluster, and there is one instance endpoint for each of the Aurora Replicas in the DB
        cluster.

        The instance endpoint provides direct control over connections to the DB cluster, for scenarios where using the
        cluster endpoint or reader endpoint might not be appropriate. For example, your client application might require
        more fine-grained load balancing based on workload type. In this case, you can configure multiple clients to
        connect to different Aurora Replicas in a DB cluster to distribute read workloads. For an example that uses
        instance endpoints to improve connection speed after a failover for Aurora PostgreSQL, see Fast failover with
        Amazon Aurora PostgreSQL. For an example that uses instance endpoints to improve connection speed after a
        failover for Aurora MySQL, see MariaDB Connector/J failover support - case Amazon Aurora.



    </p>
    <p class="heading">Additional Failover Control</p>

    <p>Each Read Replica is associated with a priority tier (0-15). In the event of a failover,
        Amazon Aurora will promote the Read Replica that has the <b> highest priority (the lowest numbered tier)</b>. If
        Same priority, then <b> replica that is largest in size</b>. If two or more Aurora Replicas share the same
        priority and size, then Amazon Aurora promotes an arbitrary replica in the same promotion tier.</p>
    <p>Aurora Replicas have two main purposes. You can issue queries to them to scale the read operations for your
        application. You typically do so by connecting to the reader endpoint of the cluster. That way, Aurora can
        spread the load for read-only connections across as many Aurora Replicas as you have in the cluster. Aurora
        Replicas also help to increase availability. If the writer instance in a cluster becomes unavailable, Aurora
        automatically promotes one of the reader instances to take its place as the new writer. Aurora DB cluster can
        contain upto 15 Aurora replicas</p>
    <p>For distributed applications, Global databases can be used. With this, Amazon Aurora spans a single database
        across multiple regions. This enables fast reads from each region and helps quick cross-region disaster
        recovery. With the Global database, failover to the secondary region can be completed with an RTO of one minute
        from the degradation or complete failures in the primary region.</p>
    <p>. Parallel Query is a feature supported currently by Amazon Aurora
        for MySQL. It makes it possible to perform analytical queries over the data stored in your
        transactional database without copying the data to a separate system for analytics.</p>

    <p> because Amazon Aurora Serverless is an on-demand, auto-scaling configuration for . It automatically starts up,
        shuts down, and scales capacity up or down based on your application's needs. You can run your database on AWS
        without managing database capacity.</p>
    <p> </p>
    <div class="explanation-block show-answer">
        <hr>
        <h6>Explanation:</h6>
        <div>
            <p><strong>Correct Answer: B</strong></p>

            <p>Amazon Aurora Database reliability can be increased by adding Aurora Replicas to the primary DB instance
                and placing them in different Availability zones. Each of the DB clusters can have a primary DB instance
                and up to 15 Aurora Replicas. In case of primary DB instance failure, Aurora automatically fails over to
                replicas. Amazon Aurora also uses the following automatic features to enhance reliability,</p>

            <ol>
                <li>Storage auto-repair: Aurora maintains multiple copies of the data in three different Availability
                    zones. This helps in avoiding data loss post disk failure. If any segment of the disk fails, Aurora
                    automatically recovers data on the segment by using data stored in other cluster volumes. This
                    reduces additional work to perform point-in-time restoration post disk failure.</li>
                <li>Survivable page cache: Manage page cache in a separate process than the database. In the event of
                    database failure, the page cache is stored in the memory. Post restarting the database, applications
                    continue to read data from the page cache providing performance gain.</li>
                <li>Crash recovery: Crash recovery can be used for faster recovery post any crash in the database. With
                    the crash recovery feature, Amazon Aurora performs recovery asynchronously on parallel threads
                    enabling applications to read data from the database without binary logs.</li>
            </ol>

            <ul>
                <li><strong>Option A is incorrect.</strong> Aurora Replicas should be created in different Availability
                    zones and not in different regions for better availability. The crash recovery does not minimize
                    data loss post disk failures.</li>
                <li><strong>Option C is incorrect. </strong>The Survivable page cache feature provides performance gains
                    but does not minimize data loss post disk failures. Aurora Replicas should be created in different
                    Availability zones and not in different regions.</li>
                <li><strong>Option D is incorrect</strong> as the crash recovery feature does not minimize data loss
                    post disk failures.</li>
            </ul>

            <p>For more information on Amazon Aurora reliability features, refer to the following URL,</p>

            <ul>
                <li><a href="https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Aurora.Overview.StorageReliability.html"
                        target="_blank">https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Aurora.Overview.StorageReliability.html</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="explanation-block show-answer"><hr><h6>Explanation:</h6><div><p><strong>Correct Answer:&nbsp;D</strong></p>

        <p>RTO (Recovery Time Objective) is a period for which downtime is observed post-disaster. It’s the time between the disaster and application recovery to serve full workloads. RPO (Recovery Point Objective) defines the amount of data loss during a disaster. It measures the time window when the last backup was performed, and the time when the disaster happened. Various Disaster recovery solutions can be deployed based on RTO/RPO and budget requirements for critical applications.</p>
        
        <p>The following are options available with Disaster recovery,</p>
        
        <ol>
            <li>Backup and Restore: Least expensive among all the options but RTO/RPO will be very high in hours. All backup resources will be initiated only after a disaster at the primary location.</li>
            <li>Pilot Light: Less expensive than warm standby and multi-site active/active. RTO/RPO happens in tens of minutes.</li>
        </ol>
        
        <p>In this strategy, a minimum number of active resources are deployed at the backup locations. Resources required for data synchronization between primary and backup locations are only provisioned and are active. Other components such as application servers are switched off and are provisioned post a disaster at the primary location. In the above scenario, Pilot Light is the most suitable option to meet RTO/RPO requirements on a low budget.</p>
        
        <ol>
            <li>Warm Standby: Expensive Than Pilot Light. RPO/RTO happens in minutes. The application is running at the backup location on scaled-down resource capacity. Once a disaster occurs at the primary location, all the resources are scaled up to meet the desired workload.</li>
            <li>Multi-site active/active: Most expensive. No downtime or data loss is incurred as applications are active from multiple regions.</li>
        </ol>
        
        <p>The following diagram shows the difference between each strategy with respect to&nbsp;&nbsp;&nbsp; RTO/RPO and cost.</p>
        
        <p><img alt="" src="https://s3.amazonaws.com/media.whizlabs.com/learn/mn3.png" style="height:338px; width:750px"></p>
        
      
        
        <ul>
            <li><a href="https://docs.aws.amazon.com/whitepapers/latest/disaster-recovery-workloads-on-aws/disaster-recovery-options-in-the-cloud.html" target="_blank">https://docs.aws.amazon.com/whitepapers/latest/disaster-recovery-workloads-on-aws/disaster-recovery-options-in-the-cloud.html</a></li>
        </ul></div></div>
</body>

</html>